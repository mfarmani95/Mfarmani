<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>BFI – Baseflow Index | Mohammad Ali Farmani</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    margin: 0;
    padding: 0;
    color: white;
    overflow-x: hidden;
    background: black;
  }

  /* === Background === */
  .video-container {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }
  .video-container video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .video-container::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(0,0,0,0.7));
  }

  /* === Navbar === */
  .navbar {
    position: fixed;
    top: 0;
    width: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(10px);
    padding: 15px 0;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 40px;
    z-index: 1000;
    box-shadow: 0 2px 20px rgba(0,0,0,0.6);
  }
  .navbar a, .navbar .dropbtn {
    color: white;
    font-size: 18px;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    position: relative;
    transition: all 0.3s ease;
  }
  .navbar a:hover, .navbar .dropbtn:hover {
    color: #f8c471;
  }
  .navbar a::after, .navbar .dropbtn::after {
    content: "";
    height: 2px;
    background: #f8c471;
    width: 0;
    position: absolute;
    bottom: -5px;
    left: 0;
    transition: width 0.3s ease;
  }
  .navbar a:hover::after, .navbar .dropbtn:hover::after {
    width: 100%;
  }

  /* Dropdown */
  .dropdown {
    position: relative;
  }
  .dropdown-content {
    display: none;
    position: absolute;
    background: rgba(0,0,0,0.95);
    border-radius: 8px;
    min-width: 160px;
    box-shadow: 0px 8px 16px rgba(0,0,0,0.4);
    z-index: 1000;
  }
  .dropdown-content a {
    color: white;
    padding: 10px 16px;
    text-decoration: none;
    display: block;
  }
  .dropdown-content a:hover {
    background: #575757;
  }
  .dropdown:hover .dropdown-content {
    display: block;
  }

  /* === Sidebar === */
  .sidebar {
    position: fixed;
    top: 80px;
    left: 0;
    width: 230px;
    height: calc(100% - 80px);
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(6px);
    border-right: 1px solid rgba(255,255,255,0.15);
    padding: 25px 15px;
    overflow-y: auto;
    box-shadow: 2px 0 10px rgba(0,0,0,0.4);
  }
  .sidebar h2 {
    color: #f8c471;
    text-align: center;
    margin-bottom: 15px;
  }
  .sidebar a {
    display: block;
    color: white;
    padding: 10px;
    text-decoration: none;
    border-radius: 6px;
    transition: all 0.3s ease;
  }
  .sidebar a:hover {
    background: rgba(248,196,113,0.2);
    box-shadow: 0 0 8px rgba(248,196,113,0.4);
  }
  .sidebar a.active {
    color: #f8c471;
    font-weight: bold;
    text-shadow: 0 0 10px rgba(248,196,113,0.6);
  }

  /* === Content === */
  .content {
    margin-left: 260px;
    padding: 30px 60px;
    background: rgba(0,0,0,0.65);
    border-radius: 15px;
    margin-top: 100px;
    margin-right: 40px;
    box-shadow: 0 0 25px rgba(248,196,113,0.3);
    animation: fadeIn 1.2s ease;
  }
  h1, h2 {
    color: #f8c471;
    text-shadow: 0 0 10px rgba(248,196,113,0.5);
    text-align: center;
  }
  p {
    text-align: justify;
    line-height: 1.7;
    font-size: 18px;
  }

  /* === Figures with Lightbox + Hover Zoom === */
  figure {
    position: relative;
    display: inline-block;
    margin: 25px auto 40px;
    text-align: center;
    cursor: pointer;
  }

  img {
    width: 40%;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.3);
    box-shadow: 0 0 20px rgba(248,196,113,0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  img:hover {
    transform: scale(1.05);
    box-shadow: 0 0 30px rgba(248,196,113,0.7);
  }
  figcaption {
    text-align: center;
    font-size: 15px;
    color: #ddd;
    margin-bottom: 30px;
  }

  /* === Lightbox === */
  .lightbox {
    display: none;
    position: fixed;
    z-index: 9999;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
  }
  .lightbox img {
    max-width: 85%;
    max-height: 85%;
    border-radius: 12px;
    box-shadow: 0 0 40px rgba(248,196,113,0.5);
    animation: zoomIn 0.3s ease;
  }
  @keyframes zoomIn {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
  .close-btn {
    position: absolute;
    top: 20px; right: 30px;
    color: #f8c471;
    font-size: 40px;
    cursor: pointer;
    transition: color 0.3s ease;
  }
  .close-btn:hover { color: white; }
  .nav-arrow {
    position: absolute;
    top: 50%;
    font-size: 50px;
    color: #f8c471;
    cursor: pointer;
    user-select: none;
    transform: translateY(-50%);
    transition: color 0.3s ease;
  }
  .nav-arrow:hover { color: white; }
  .arrow-left { left: 40px; }
  .arrow-right { right: 40px; }

  /* === Back to Top Button === */
  #backToTop {
    position: fixed;
    bottom: 40px;
    right: 40px;
    background: #f8c471;
    color: black;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 22px;
    cursor: pointer;
    box-shadow: 0 0 20px rgba(248,196,113,0.6);
    opacity: 0;
    transition: all 0.4s ease;
    z-index: 999;
  }
  #backToTop.show {
    opacity: 1;
    transform: scale(1);
  }
  #backToTop:hover {
    background: white;
    color: #f8c471;
    box-shadow: 0 0 25px rgba(255,255,255,0.8);
  }

  /* === Footer === */
  .footer {
    text-align: center;
    padding: 25px;
    background: rgba(0,0,0,0.7);
    font-size: 16px;
    border-top: 1px solid rgba(255,255,255,0.2);
    box-shadow: 0 -2px 20px rgba(0,0,0,0.5);
  }
  .footer a {
    color: #f8c471;
    text-decoration: none;
  }
  .footer a:hover {
    color: #fff;
    text-shadow: 0 0 10px #f8c471, 0 0 20px #f8c471;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 900px) {
    .sidebar {
      position: relative;
      width: 100%;
      height: auto;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .content {
      margin-left: 0;
      margin-right: 0;
      padding: 25px;
    }
    img { width: 80%; }
  }
</style>
</head>

<body>
  <div class="video-container">
    <video autoplay muted loop playsinline>
      <source src="PUB_BG.mp4" type="video/mp4" />
    </video>
  </div>

  <div class="navbar">
    <a href="index.html"><i class="fas fa-home"></i> Home</a>
    <a href="cv.html"><i class="fas fa-id-card"></i> CV</a>
    <a href="publications.html"><i class="fas fa-book"></i> Publications</a>
    <div class="dropdown">
      <a href="#" class="dropbtn"><i class="fas fa-briefcase"></i> Projects ▾</a>
      <div class="dropdown-content">
        <a href="smm.html">SMM</a>
        <a href="bfi.html">BFI</a>
      </div>
    </div>
  </div>

  <div class="sidebar">
    <h2>Navigation</h2>
    <a href="#introduction">Introduction</a>
    <a href="#importance">Baseflow Generation</a>
    <a href="#findings">Key Findings</a>
    <a href="#implications">Implications</a>
    <a href="#conclusion">Conclusion</a>
    <a href="#reference">Reference</a>
  </div>

  <div class="content">
    <h1 id="introduction">Baseflow and Streamflow Prediction</h1>
    <p>The accuracy of hydrological models in predicting streamflow, particularly in arid regions, depends on how well they represent surface and subsurface runoff and groundwater recharge. Baseflow sustains rivers during dry periods, making its accurate simulation essential.</p>

    <figure>
      <img src="BFI_MOdel.png" alt="Baseflow Example" />
      <figcaption>Figure 1. Baseflow computed using Van Dijk (2010) method.</figcaption>
    </figure>

    <h2 id="importance">Importance of Understanding Baseflow Generation</h2>
    <p>Baseflow sustains streamflow during dry periods, yet traditional LSMs often overestimate it due to simplified soil processes. Improved physical representation enhances drought resilience and streamflow forecasting.</p>

    <figure>
      <img src="BFI_RESULTS.png" alt="BFI Results" />
      <figcaption>Figure 2. Modeled vs observed BFI at 390 gauges across the Southwest U.S.</figcaption>
    </figure>

    <h2 id="findings">Key Findings</h2>
    <p><b>1.</b> CH model overestimates baseflow; VG captures low-BFI regions better.</p>
    <p><b>2.</b> Macropores and ponding thresholds improve recharge realism.</p>
    <p><b>3.</b> ML-calibrated parameters improved streamflow KGE by 20%.</p>
    <p><b>4.</b> IMERG forcing corrected overestimated BFI from NLDAS-2/AORC.</p>

    <figure>
      <img src="KGE_RESULTS.png" alt="KGE Improvement" />
      <figcaption>Figure 3. ML-derived parameters improved KGE vs lookup tables.</figcaption>
    </figure>

    <h2 id="implications">Implications for Water Management</h2>
    <p>Enhanced baseflow modeling improves drought prediction, water allocation, and climate modeling accuracy, especially across arid basins.</p>

    <h2 id="conclusion">Conclusion</h2>
    <p>The combination of improved hydraulic schemes and IMERG forcing produced the most physically realistic baseflow representation, advancing prediction skill in the arid Southwest.</p>

    <h2 id="reference">Reference</h2>
    <p><b>Farmani, M. A.</b> et al. (2025). Improving streamflow predictions in the arid Southwestern U.S. <i>Water Resources Research</i>. 
    <a href="https://doi.org/10.1029/2024WR039479" target="_blank">https://doi.org/10.1029/2024WR039479</a></p>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox">
    <span class="close-btn">&times;</span>
    <span class="nav-arrow arrow-left">&#10094;</span>
    <img src="" alt="Expanded view" id="lightbox-img" />
    <span class="nav-arrow arrow-right">&#10095;</span>
  </div>

  <!-- Back to Top Button -->
  <button id="backToTop" title="Back to Top"><i class="fas fa-arrow-up"></i></button>

  <div class="footer">
    <p>Created by Mohammad Ali Farmani | <a href="mailto:farmani@arizona.edu">farmani@arizona.edu</a></p>
  </div>

  <script>
    // Sidebar highlight
    const sections = document.querySelectorAll("h1, h2");
    const navLinks = document.querySelectorAll(".sidebar a");
    window.addEventListener("scroll", () => {
      let current = "";
      sections.forEach(sec => {
        const top = sec.offsetTop - 120;
        if (scrollY >= top) current = sec.getAttribute("id");
      });
      navLinks.forEach(link => {
        link.classList.remove("active");
        if (link.getAttribute("href") === `#${current}`) link.classList.add("active");
      });
    });

    // Lightbox functionality
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const closeBtn = document.querySelector('.close-btn');
    const leftArrow = document.querySelector('.arrow-left');
    const rightArrow = document.querySelector('.arrow-right');
    const images = Array.from(document.querySelectorAll('.content img'));
    let currentIndex = 0;
    function showImage(index) {
      currentIndex = (index + images.length) % images.length;
      lightboxImg.src = images[currentIndex].src;
      lightboxImg.alt = images[currentIndex].alt;
    }
    images.forEach((img, i) => img.addEventListener('click', () => {
      lightbox.style.display = 'flex';
      showImage(i);
    }));
    closeBtn.addEventListener('click', () => lightbox.style.display = 'none');
    leftArrow.addEventListener('click', () => showImage(currentIndex - 1));
    rightArrow.addEventListener('click', () => showImage(currentIndex + 1));
    lightbox.addEventListener('click', e => { if (e.target === lightbox) lightbox.style.display = 'none'; });
    window.addEventListener('keydown', e => {
      if (e.key === 'Escape') lightbox.style.display = 'none';
      else if (e.key === 'ArrowLeft') showImage(currentIndex - 1);
      else if (e.key === 'ArrowRight') showImage(currentIndex + 1);
    });

    // Back to Top
    const backToTop = document.getElementById("backToTop");
    window.addEventListener("scroll", () => {
      if (window.scrollY > 400) backToTop.classList.add("show");
      else backToTop.classList.remove("show");
    });
    backToTop.addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));
  </script>
</body>
</html>
